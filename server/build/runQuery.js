// Generated by CoffeeScript 1.10.0
(function() {
  var Promise, _, path_to_route, pg, run;

  path_to_route = '../../../';

  Promise = require('bluebird');

  pg = require('pg');

  _ = require('lodash');

  run = function(query, params) {
    if (!_.isArray) {
      throw Error('Params must be an array in order to run query');
    }
    return new Promise(function(resolve, reject) {
      return pg.connect('postgres://postgres:Sharkt0wer@localhost/postgres', function(err, client, done) {
        return client.query(query, params, function(err, result) {
          if (err) {
            done();
            return reject(err);
          } else {
            done();
            return resolve(result.rows);
          }
        });
      });
    });
  };

  module.exports = run;

}).call(this);
